@model prj_Traveldate_Core.ViewModels.CMemberForBasicInfoViewModel; 
@{
    ViewData["Title"] = "basicInfo";
}

<div class="container mt-2" style="justify-content:space-between;display:flex"> 
    @* <div class="row"> *@
        <div class="col-md-3"> 
            <div id="div1">
                <div class="cell" id="div3">
                    <div class="cell d-flex flex-column">
@*                      原本load二進位的頭像圖片用
                        @{
                            if (ViewBag.photo != null)
                            {
                                <div style="text-align:center;background-color:white;border-radius:10px">
                                    <img src="@ViewBag.PhotoBase64" width="150" height="150" />
                                </div>
                            }
                            else
                            {
                                <img src="~/icons/User profile - border vector image.png" style="width: 150px; height" alt="noimage" />
                            }
                        }*@
                         @{
                            if (ViewBag.image != null)
                            {
                                                            <div style="text-align:center;background-color:white;border-radius:10px">
                                                                <img src="~/images/@ViewBag.image" width="150" height="150" />
                                                           </div>
                            }
                            else
                            {
                                                            <div style = "text-align:center;background-color:white;border-radius:10px" >
                                                                <img src="~/icons/User profile - border vector image.png" width="150" height="150" />
                                                             </div>
                            }
                    }
                    </div>
                <ul class="list-group leftarea mt-3" style="font-size:18px;font-weight:600">
                    <li class="list-group-item menuItem" data-content="subItem1"> <span><img style="height:50px;width:45px;padding-bottom:5px" src="~/icons/icon-hi-2(member).gif" /></span><b style="font-weight:bolder;font-size:20px;font-weight:600;padding-top:-50px">@ViewBag.LastName@ViewBag.firstName</b></li>
                       
                        @{
                            if (ViewBag.level == "黑鑽會員")
                                    {
                                                                    <li class="list-group-item menuItem" data-content="subItem2" style="background-color:whitesmoke"><span><img style=" height:30px;width:30px;padding-bottom:5px" src="~/icons/level_dimond48.png" /></span><b>@ViewBag.level</b></li>
                                    }
                            else if (ViewBag.level == "黃金會員")
                                    {
                                                                    <li class="list-group-item menuItem" data-content="subItem2" style="background-color:whitesmoke"><span><img style=" height:40px;width:40px;padding-bottom:5px" src="~/icons/level-gold-50.png" /></span><b>@ViewBag.level</b></li>
                                    }
                            else if (ViewBag.level == "白銀會員")
                                    {
                                                                    <li class="list-group-item menuItem" data-content="subItem2" style="background-color:whitesmoke"><span><img style=" height:40px;width:40px;padding-bottom:5px" src="~/icons/level-slover-50.png" /></span><b>@ViewBag.level</b></li>
                                     }
                            else
                                    {
                                                                    <li class="list-group-item menuItem" data-content="subItem2" style="background-color:whitesmoke; margin-top:-10px">@ViewBag.level </li>
                                   }
                        }                
                        </ul>

                    <div class="cell" id="div2">
                    <ul class="list-group leftarea lgmenu mt-3 " style="font-size:20px;font-weight:600">
                            <li class="list-group-item menuItem">@Html.ActionLink("基本資料設定", "basicInfo","Member","",new {@class="black-link"})</li>
                        <li class="list-group-item menuItem">@Html.ActionLink("密碼更改", "passwordChange","Member","",new {@class="black-link",@style="margin-left:-5px"}) </li>
                            <li class="list-group-item menuItem">
                                @Html.ActionLink("優惠券清單", "couponList","Member","",new {@class="black-link"})
                                <span class="badge rounded-pill bg-danger">@ViewBag.countscoupon</span>
                            </li>
                        <li class="list-group-item menuItem">@Html.ActionLink("常用旅伴", "showCompanion","Member","",new {@class="black-link",@style="margin-left:-5px"}) </li>
                            <li class="list-group-item menuItem">
                                @Html.ActionLink("收藏清單", "favoriteList","Member","",new {@class="black-link"})
                                <span class="badge rounded-pill bg-danger">@ViewBag.countsfavorite</span>
                            </li>
                            <li class="list-group-item menuItem">
                                @Html.ActionLink("會員訂單", "orderList","Member","",new {@class="black-link"})
                                <span class="badge rounded-pill bg-danger">@ViewBag.countsorder</span>
                            </li>
                            <li class="list-group-item menuItem">
                                @Html.ActionLink("我的評論", "commentList","Member","",new {@class="black-link"})
                                <span class="badge rounded-pill bg-danger">@ViewBag.countscomment</span>
                            </li>
                            <li class="list-group-item menuItem">
                                @Html.ActionLink("我的揪團", "forumList","Member","",new {@class="black-link"})
                                <span class="badge rounded-pill bg-danger">@ViewBag.ForumLists</span>
                            </li>
                        <li class="list-group-item menuItem">
                            @Html.ActionLink("樂旅Chat", "SignalR","Member","",new {@class="black-link"})
                            @* <span class="badge rounded-pill bg-danger">@ViewBag.ForumLists</span> *@
                            <span><img style="width:30px;height:25px" src="~/icons/icon-chat-2.gif" /></span>
                        </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    <!-- ↑↑↑左半邊 - 內容容器↑↑↑ -->
    <!-- ↓↓↓右半邊 - 內容容器↓↓↓ -->
    <div id="rightPanel" class="col-md-9">
        <h3 class="mb-4"><b>基本資料設定</b></h3>
            <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="~/HomePage/HomePage">首頁</a></li>
                    <li class="breadcrumb-item active" aria-current="page"><a href="~/Login/Login"> 會員登入</a></li>
                    <li class="breadcrumb-item active" aria-current="page"><a href="~/Member/index"> 會員專區</a></li>
                    <li class="breadcrumb-item active" aria-current="page">基本資料設定</li>
                </ol>
            </nav>
            <div >
@*                @foreach (var member in Model)
                {*@
                <form asp-action="basicInfo" enctype="multipart/form-data">
                @* using (Html.BeginForm("basicInfo","Member",FormMethod.Post)){ *@
                    <div class="form-group">

                        @Html.HiddenFor(model => model.MemberId)
                    </div>
                    <div class="form-group">
                        姓
                        @Html.EditorFor(model=>model.LastName,"",new {htmlAttributes=new{@class="form-control"}})                    
                    </div>
                    <div class="form-group">
                        名
                        @Html.EditorFor(model=>model.FirstName,"",new {htmlAttributes=new{@class="form-control"}})                      
                    </div>
                    <div class="form-group">
                        性別
                        <select asp-for="Gender" class="form-control">
                            <option value="男" >男</option>
                            <option value="女" >女</option>
                       </select>
                    </div>
                    <div class="form-group">
                        出生日期
                        <input asp-for="BirthDate" type="date" class="form-control" />
                    </div>
                    <div class="form-group">
                        手機號碼
                        @Html.EditorFor(model=>model.Phone,"",new {htmlAttributes=new{@class="form-control"}})                       
                    </div>
                    <div class="form-group">
                        聯絡信箱                       
                        @Html.EditorFor(model => model.Email, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly", @style = "background-color: whitesmoke; color: #7B7B7B;", @title = "此欄位不得修改", data_bs_toggle = "tooltip", data_bs_placement = "right" } })
                    </div>
                    <div class="form-group">
                        <label for="formfiles">照片</label>
                        <input asp-for="photos" type="file" class="form-control" id="formFile" />
                    </div>

                <div class="form-group" >
                    <div id="imagePreview" class="w-100 mt-4">
                        @*w-100 是元素寬度 ;mt-2 是頂部外邊距單位*@
                        <img src="" alt="" id="show" />
                    </div>
                </div>

                    <div class="form-group">
                        @Html.HiddenFor(model => model.Password)
                    </div>
                    <div class="form-group">
                        @Html.HiddenFor(model => model.LevelId)
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn my-btn-primary" id="btnEditbasicInfo">儲存</button>
                    </div>
                        @*}*@
                </form>
                
            </div>      
        </div>
</div>



@*<div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item active" data-bs-interval="4000">
            <img src="https://picsum.photos/id/454/1500/300" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item" data-bs-interval="4000">
            <img src="https://picsum.photos/id/177/1500/300" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item" data-bs-interval="4000">
            <img src="https://picsum.photos/id/442/1500/300" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item" data-bs-interval="4000">
            <img src="https://picsum.photos/id/440/1500/300" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item" data-bs-interval="4000">
            <img src="https://picsum.photos/id/583/1500/300" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item" data-bs-interval="4000">
            <img src="https://picsum.photos/id/770/1500/300" class="d-block w-100" alt="...">
        </div>
    </div>*@


@section Styles{
    <link rel="stylesheet" href="~/css/Member.css" asp-append-version="true" />
}

@section scripts{
    <script src="path/to/sweetalert.js"></script>
    <script>              
        const btnEditbasicInfo = document.getElementById('btnEditbasicInfo');     
        
        btnEditbasicInfo.addEventListener('click', () => {                       
            swal("基本資料修改成功！", "", "success", { button: false });                       
            setTimeout(() => {                       
            }, 1500);                                 
        });           
    </script>

    <script>
        const input = document.getElementById('formFile');
        const imagePreview = document.getElementById('imagePreview');

        input.addEventListener('change', function (event) { // 添加参数 event
            // 清空預覽區塊
            imagePreview.innerHTML = '';

            const file = input.files[0];
            const reader = new FileReader();

                reader.addEventListener('load', () => {
                const img = document.createElement('img');
                img.src = reader.result;
                img.style.height = '100px'; // 設置圖像高度
                img.style.marginRight = '10px'; // 可選的間距
                imagePreview.appendChild(img); //將圖添加到預覽區塊
                });
            if (file != null) { 
                reader.readAsDataURL(file);
            }
        });
    </script>
}
